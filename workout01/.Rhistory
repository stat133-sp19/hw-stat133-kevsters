github = 'https://github.com/ucb-stat133/stat133-hws/'
repo = 'raw/master/data/nba2018-players.csv'
datafile = paste0(github, repo)
help read.table()
help table
?points
?cex
?points
?plot.default
install.packages("qwraps2")
inatall.packages("dplyr")
install.packages("dplyr")
install.packages("qable")
install.packages(c("dplyr", "ggplot2"))
install.packages("readr")
install.packages("curl")
help png()
? png()
? pdf()
? sink()
getwd()
getwd()
dray[dray$shot_made_flag == "y"] = c("shot_yes")
dray$player_name = c("Draymond Green")
# add new levels to the factor
levels(curry$shot_made_flag) = c(levels(curry$shot_made_flag), "shot_yes", "shot_no")
getwd()
library(dplyr)
library(dplyr)
library(dplyr)
# For entry #2 (date of game), maybe better to use some kind of datetime package than just a character
data_Types = c("character", "character", "integer", "integer", "integer",
"integer", "factor", "factor", "factor", "integer",
"character", "integer", "integer")
curry = read.csv("../data/stephen-curry.csv", stringsAsFactors = FALSE, colClasses = data_Types)
iggy = read.csv("../data/andre-iguodala.csv", stringsAsFactors = FALSE, colClasses = data_Types)
durant = read.csv("../data/kevin-durant.csv", stringsAsFactors = FALSE, colClasses = data_Types)
klay = read.csv("../data/klay-thompson.csv", stringsAsFactors = FALSE, colClasses = data_Types)
dray = read.csv("../data/draymond-green.csv", stringsAsFactors = FALSE, colClasses = data_Types)
# add a player name column to each data frame
curry$player_name = c("Stephen Curry")
iggy$player_name = c("Andre Iguodala")
durant$player_name = c("Kevin Durant")
klay$player_name = c("Klay Thompson")
dray$player_name = c("Draymond Green")
# In shot_made_flag category, change "n" to "shot_no", and "y" to "shot_yes"
# add new levels to the factor
levels(curry$shot_made_flag) = c(levels(curry$shot_made_flag), "shot_yes", "shot_no")
drop.levels(curry$shot_made_flag)
curry[curry$shot_made_flag == "n"] = c("shot_no")
curry[curry$shot_made_flag == "y"] = c("shot_yes")
levels(iggy$shot_made_flag) = c(levels(iggy$shot_made_flag), "shot_yes", "shot_no")
drop.levels(iggy$shot_made_flag)
iggy[iggy$shot_made_flag == "n"] = c("shot_no")
iggy[iggy$shot_made_flag == "y"] = c("shot_yes")
levels(durant$shot_made_flag) = c(levels(durant$shot_made_flag) , "shot_yes", "shot_no")
drop.levels(durant$shot_made_flag)
durant[durant$shot_made_flag == "n"] = c("shot_no")
durant[durant$shot_made_flag == "y"] = c("shot_yes")
levels(klay$shot_made_flag) = c(levels(klay$shot_made_flag), "shot_yes", "shot_no")
drop.levels(klay$shot_made_flag)
klay[klay$shot_made_flag == "n"] = c("shot_no")
klay[klay$shot_made_flag == "y"] = c("shot_yes")
levels(dray$shot_made_flag) = c(levels(dray$shot_made_flag), "shot_yes", "shot_no")
drop.levels(dray$shot_made_flag)
dray[dray$shot_made_flag == "n"] = c("shot_no")
dray[dray$shot_made_flag == "y"] = c("shot_yes")
data_Types = c("character", "character", "integer", "integer", "integer",
"integer", "factor", "factor", "factor", "integer",
"character", "integer", "integer")
curry = read.csv("../../stat133/workouts/workout1/data/stephen-curry.csv", stringsAsFactors = FALSE, colClasses = data_Types)
data_Types = c("character", "character", "integer", "integer", "integer",
"integer", "factor", "factor", "factor", "integer",
"character", "integer", "integer")
curry = read.csv("../../stat133/workouts/workout01/data/stephen-curry.csv", stringsAsFactors = FALSE, colClasses = data_Types)
library(dplyr)
# For entry #2 (date of game), maybe better to use some kind of datetime package than just a character
data_Types = c("character", "character", "integer", "integer", "integer",
"integer", "factor", "factor", "factor", "integer",
"character", "integer", "integer")
curry = read.csv("../../stat133/workouts/workout01/data/stephen-curry.csv", stringsAsFactors = FALSE, colClasses = data_Types)
iggy = read.csv("../../stat133/workouts/workout01/data/andre-iguodala.csv", stringsAsFactors = FALSE, colClasses = data_Types)
durant = read.csv("../../stat133/workouts/workout01/data/kevin-durant.csv", stringsAsFactors = FALSE, colClasses = data_Types)
klay = read.csv("../../stat133/workouts/workout01/data/klay-thompson.csv", stringsAsFactors = FALSE, colClasses = data_Types)
dray = read.csv("../../stat133/workouts/workout01/data/draymond-green.csv", stringsAsFactors = FALSE, colClasses = data_Types)
# add a player name column to each data frame
curry$player_name = c("Stephen Curry")
iggy$player_name = c("Andre Iguodala")
durant$player_name = c("Kevin Durant")
klay$player_name = c("Klay Thompson")
dray$player_name = c("Draymond Green")
# In shot_made_flag category, change "n" to "shot_no", and "y" to "shot_yes"
# add new levels to the factor
levels(curry$shot_made_flag) = c(levels(curry$shot_made_flag), "shot_yes", "shot_no")
drop.levels(curry$shot_made_flag)
curry[curry$shot_made_flag == "n"] = c("shot_no")
curry[curry$shot_made_flag == "y"] = c("shot_yes")
levels(iggy$shot_made_flag) = c(levels(iggy$shot_made_flag), "shot_yes", "shot_no")
drop.levels(iggy$shot_made_flag)
iggy[iggy$shot_made_flag == "n"] = c("shot_no")
iggy[iggy$shot_made_flag == "y"] = c("shot_yes")
levels(durant$shot_made_flag) = c(levels(durant$shot_made_flag) , "shot_yes", "shot_no")
drop.levels(durant$shot_made_flag)
durant[durant$shot_made_flag == "n"] = c("shot_no")
durant[durant$shot_made_flag == "y"] = c("shot_yes")
levels(klay$shot_made_flag) = c(levels(klay$shot_made_flag), "shot_yes", "shot_no")
drop.levels(klay$shot_made_flag)
klay[klay$shot_made_flag == "n"] = c("shot_no")
klay[klay$shot_made_flag == "y"] = c("shot_yes")
levels(dray$shot_made_flag) = c(levels(dray$shot_made_flag), "shot_yes", "shot_no")
drop.levels(dray$shot_made_flag)
dray[dray$shot_made_flag == "n"] = c("shot_no")
dray[dray$shot_made_flag == "y"] = c("shot_yes")
write.csv(stacked, 'data/shots-data.csv')
#' @Title: Make-Shots-Data-Script
#' @Description: Purpose is to create a shots-data.csv file which will contain all required variables to
# be used during visualization.
#' @Input: The csv files in the data folder
#' @Output: Txt summary files for each player's shot data
library(plyr)
library(dplyr)
setwd("../../stat133/workouts/workout01")
# For entry #2 (date of game), maybe better to use some kind of datetime package than just a character
data_Types = c("character", "character", "integer", "integer", "integer",
"integer", "factor", "factor", "factor", "integer",
"character", "integer", "integer")
curry = read.csv("data/stephen-curry.csv", stringsAsFactors = FALSE, colClasses = data_Types)
iggy = read.csv("data/andre-iguodala.csv", stringsAsFactors = FALSE, colClasses = data_Types)
durant = read.csv("data/kevin-durant.csv", stringsAsFactors = FALSE, colClasses = data_Types)
klay = read.csv("data/klay-thompson.csv", stringsAsFactors = FALSE, colClasses = data_Types)
dray = read.csv("data/draymond-green.csv", stringsAsFactors = FALSE, colClasses = data_Types)
# add a player name column to each data frame
curry$player_name = c("Stephen Curry")
iggy$player_name = c("Andre Iguodala")
durant$player_name = c("Kevin Durant")
klay$player_name = c("Klay Thompson")
dray$player_name = c("Draymond Green")
# In shot_made_flag category, change "n" to "shot_no", and "y" to "shot_yes"
curry$shot_made_flag = revalue(curry$shot_made_flag, c("y" = "shot_yes", "n" = "shot_no"))
iggy$shot_made_flag = revalue(iggy$shot_made_flag, c("y" = "shot_yes", "n" = "shot_no"))
durant$shot_made_flag = revalue(durant$shot_made_flag, c("y" = "shot_yes", "n" = "shot_no"))
klay$shot_made_flag  = revalue(klay$shot_made_flag, c("y" = "shot_yes", "n" = "shot_no"))
dray$shot_made_flag  = revalue(dray$shot_made_flag, c("y" = "shot_yes", "n" = "shot_no"))
# add minute column which is minute where shot occurred
curry$minute = ((curry$period - 1) * 12) + (12 - curry$minutes_remaining)
iggy$minute = ((iggy$period - 1) * 12) + (12 - iggy$minutes_remaining)
durant$minute = ((durant$period - 1) * 12) + (12 - durant$minutes_remaining)
klay$minute = ((klay$period - 1) * 12) + (12 - klay$minutes_remaining)
dray$minute = ((dray$period - 1) * 12) + (12 - dray$minutes_remaining)
# sending summary of each data frame to outputs directory
sink(file = 'output/stephen-curry-summary.txt')
summary(curry)
sink()
sink(file = 'output/andre-iguodala-summary.txt')
summary(iggy)
sink()
sink(file = 'output/kevin-durant-summary.txt')
summary(durant)
sink()
sink(file = 'output/klay-thompson-summary.txt')
summary(klay)
sink()
sink(file = 'output/draymond-green-summary.txt')
summary(dray)
sink()
# stack data frames into one object and sink it to data directory
stacked = rbind(curry, iggy, durant, klay, dray)
write.csv(stacked, 'data/shots-data.csv')
# send summary of the assembled table to outputs folder
sink(file = 'output/shots-data-summary.txt')
summary(stacked)
sink()
install.packages("gridExtra")
player_name_faceted = ggplot(data = stacked) +
annotation_custom(court_image, -250, 250, -50, 420) +
geom_point(aes(x = x, y = y, color = shot_made_flag)) +
ylim(-50, 420) +
ggtitle('Shot Charts: GSW (2016 season)') +
theme_minimal() +
facet_wrap(~ player_name)
player_name_faceted
ggsave("images/gsw-shot-charts.png", width = 8, height = 7, units = "in")
#' @Title: Make-Shots-Charts-Script
#' @Description: Creating shot charts for various players on the Warriors
#' @Input: The csv in the data folder
#' @Output: various plots (shot charts)
library(ggplot2)
library(jpeg)
library(grid)
court_file = "images/nba-court.jpg"
court_image = rasterGrob(
readJPEG(court_file),
width = unit(1, "npc"),
height = unit(1, "npc"))
curry_shot_chart <- ggplot(data = curry) +
annotation_custom(court_image, -250, 250, -50, 420) +
geom_point(aes(x = x, y = y, color = shot_made_flag)) +
ylim(-50, 420) +
ggtitle('Shot Chart: Stephen Curry (2016 season)') +
theme_minimal()
curry_shot_chart
ggsave("images/stephen-curry-shot-chart.pdf", width = 6.5, height = 5, units = "in")
iggy_shot_chart <- ggplot(data = iggy) +
annotation_custom(court_image, -250, 250, -50, 420) +
geom_point(aes(x = x, y = y, color = shot_made_flag)) +
ylim(-50, 420) +
ggtitle('Shot Chart: Andre Iguodala (2016 season)') +
theme_minimal()
iggy_shot_chart
ggsave("images/andre-iguodala-shot-chart.pdf", width = 6.5, height = 5, units = "in")
durant_shot_chart <- ggplot(data = durant) +
annotation_custom(court_image, -250, 250, -50, 420) +
geom_point(aes(x = x, y = y, color = shot_made_flag)) +
ylim(-50, 420) +
ggtitle('Shot Chart: Kevin Durant (2016 season)') +
theme_minimal()
durant_shot_chart
ggsave("images/kevin-durant-shot-chart.pdf", width = 6.5, height = 5, units = "in")
klay_shot_chart <- ggplot(data = klay) +
annotation_custom(court_image, -250, 250, -50, 420) +
geom_point(aes(x = x, y = y, color = shot_made_flag)) +
ylim(-50, 420) +
ggtitle('Shot Chart: Klay Thompson (2016 season)') +
theme_minimal()
klay_shot_chart
ggsave("images/klay-thompson-shot-chart.pdf", width = 6.5, height = 5, units = "in")
dray_shot_chart <- ggplot(data = dray) +
annotation_custom(court_image, -250, 250, -50, 420) +
geom_point(aes(x = x, y = y, color = shot_made_flag)) +
ylim(-50, 420) +
ggtitle('Shot Chart: Draymond Green (2016 season)') +
theme_minimal()
dray_shot_chart
ggsave("images/draymond-green-shot-chart.pdf", width = 6.5, height = 5, units = "in")
player_name_faceted = ggplot(data = stacked) +
annotation_custom(court_image, -250, 250, -50, 420) +
geom_point(aes(x = x, y = y, color = shot_made_flag)) +
ylim(-50, 420) +
ggtitle('Shot Charts: GSW (2016 season)') +
theme_minimal() +
facet_wrap(~ player_name)
player_name_faceted
ggsave("images/gsw-shot-charts.png", width = 8, height = 7, units = "in")
